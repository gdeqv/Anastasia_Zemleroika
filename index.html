<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Когда придёт Анастасия Землеройка</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Creepster&display=swap');

    body {
        margin: 0;
        padding: 0;
        background-color: #000;
        color: #fff;
        font-family: 'Creepster', cursive;
        text-align: center;
    }

    header {
        position: relative;
        padding: 20px;
    }

    header img.warning {
        position: absolute;
        top: 20px;
        width: 60px;
    }

    header img.warning.left { left: 20px; }
    header img.warning.right { right: 20px; }

    header img.character {
        width: 200px;
        border-radius: 10px;
    }

    h1 {
        font-size: 2.5em;
        margin: 10px 0;
        color: #ff0000;
        text-shadow: 0 0 10px #ff0000;
    }

    .disclaimer {
        font-size: 0.8em;
        color: #888;
        margin-bottom: 30px;
    }

    .search-section {
        margin: 20px 0;
    }

    input[type="text"], input[type="date"] {
        padding: 10px;
        font-size: 1em;
        border-radius: 5px;
        border: none;
        outline: none;
        margin-right: 10px;
    }

    button {
        padding: 10px 15px;
        font-size: 1em;
        border-radius: 5px;
        border: none;
        background-color: #ff0000;
        color: #fff;
        cursor: pointer;
    }

    .result {
        margin-top: 30px;
        font-size: 1.5em;
        color: #00ff00;
    }

    .warning-text {
        margin-top: 20px;
        font-size: 1.2em;
        color: #ff5555;
    }

    .locations {
        margin-top: 30px;
        font-size: 1em;
        color: #ff8800;
        text-align: left;
        display: inline-block;
    }

    .locations h2 { color: #ff4400; }

    .city-result {
        margin-top: 20px;
        font-size: 1.2em;
        color: #ff8800;
        border: 1px solid #ff8800;
        padding: 15px;
        border-radius: 10px;
        display: inline-block;
        text-align: left;
    }

    .city-result span.time { color: #00ff00; font-weight: bold; }
    .city-result span.alert { color: #ff4444; font-weight: bold; }
</style>
</head>
<body>

<header>
    <img class="warning left" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Warning_icon.svg/1200px-Warning_icon.svg.png" alt="Warning">
    <img class="warning right" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Warning_icon.svg/1200px-Warning_icon.svg.png" alt="Warning">
    <img class="character" src="https://i.postimg.cc/pVD9BJq2/Screenshot-20251109-122443-2.png" alt="Анастасия Землеройка">
    <h1>Когда придёт Анастасия Землеройка?</h1>
</header>

<p class="disclaimer">⚠️ Всё шутка! Анастасия Землеройка — вымышленный мемный персонаж. ⚠️</p>

<div class="search-section">
    <input type="date" id="arrivalDate">
    <input type="text" id="citySearch" placeholder="Введите город или село">
    <button onclick="calculateTime()">Проверить</button>
</div>

<div class="result" id="countdown"></div>
<div class="warning-text" id="warning"></div>

<div class="city-result" id="cityResult" style="display:none;"></div>

<div class="locations">
    <h2>Где замечена Анастасия:</h2>
    <ul id="locations-list">
        <li data-time="13:00">Test-City 1</li>
        <li data-time="13:05">Test-Village 1</li>
        <li data-time="13:15">Test-Village 2</li>
        <li data-time="13:20">Test-Village 3</li>
        <li data-time="13:40">Test-City 2</li>
    </ul>
</div>

<script>
function calculateTime() {
    const input = document.getElementById('arrivalDate').value;
    const searchTerm = document.getElementById('citySearch').value.toLowerCase();
    const cityResultDiv = document.getElementById('cityResult');

    if(!input) {
        alert('Выберите дату!');
        return;
    }

    const arrival = new Date(input + 'T00:00:00+03:00'); // МСК
    const now = new Date();
    const diff = arrival - now;

    if(diff < 0) {
        document.getElementById('countdown').textContent = 'Анастасия уже здесь...';
        document.getElementById('warning').textContent = '⚠️ Срочно укрывайтесь! ⚠️';
    } else {
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const weeks = Math.floor(days / 7);
        const months = Math.floor(days / 30);
        document.getElementById('countdown').textContent = 
            `До прихода осталось: ${months} месяцев, ${weeks%4} недель, ${days%7} дней.`;
        document.getElementById('warning').textContent = '';
    }

    const listItems = document.querySelectorAll('#locations-list li');
    const nowMSK = new Date(new Date().toLocaleString("en-US", {timeZone: "Europe/Moscow"}));

    let found = false;

    listItems.forEach(li => {
        li.style.color = '#888';
        li.textContent = li.textContent.split(' ')[0]; // сброс текста
        const cityName = li.textContent.toLowerCase();
        if(searchTerm && cityName.includes(searchTerm)) {
            found = true;
            const timeParts = li.getAttribute('data-time').split(':');
            const cityTime = new Date(nowMSK);
            cityTime.setHours(parseInt(timeParts[0]));
            cityTime.setMinutes(parseInt(timeParts[1]));
            cityTime.setSeconds(0);
            const delta = (cityTime - nowMSK) / (1000 * 60); // разница в мин

            let alertText = '';
            let color = '';
            if(delta <= 0 && delta > -15) {
                alertText = 'Очень близко! ⚠️';
                color = '#ff4444';
            } else if(delta > 0 && delta <= 15) {
                alertText = 'Почти здесь! ⚠️';
                color = '#ff8800';
            } else {
                alertText = 'Пока далеко ✅';
                color = '#00ff00';
            }

            cityResultDiv.style.display = 'block';
            cityResultDiv.innerHTML = `
                <strong>${li.textContent}</strong><br>
                Время прихода (МСК): <span class="time">${li.getAttribute('data-time')}</span><br>
                Статус: <span class="alert" style="color:${color}">${alertText}</span>
            `;
        }
    });

    if(searchTerm && !found) {
        cityResultDiv.style.display = 'block';
        cityResultDiv.innerHTML = `Город или село не найдено.`;
    } else if(!searchTerm) {
        cityResultDiv.style.display = 'none';
    }
}
</script>

</body>
  </html>
